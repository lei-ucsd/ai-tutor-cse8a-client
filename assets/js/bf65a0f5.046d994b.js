"use strict";(self.webpackChunkai_tutor_cse_8_a=self.webpackChunkai_tutor_cse_8_a||[]).push([[252],{11866:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var n=a(67294),s=a(82750),o=a(90629),r=a(26307),i=a(93946),l=a(83321),c=a(90747);function m(e){let{id:t,className:a,value:s,onChange:o}=e;const r=(0,c.j)({height:"100%",maxHeight:"100%"});return n.createElement("div",{id:t,className:`container ${a}`,"data-color-mode":"light",style:{margin:"1vh 0px",maxWidth:"100%"},onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),r.insertText("    "))}},n.createElement(c.C,{editor:r,value:s,onChange:o,throttleInMs:200}))}function u(e){let{onAddMsg:t,onSaveHistory:a,onLoadHistory:s}=e;const[o,c]=(0,n.useState)("");return n.createElement(n.Fragment,null,n.createElement("div",{className:"wrapForm"},n.createElement(m,{id:"standard-text",className:"wrapText",value:o,onChange:e=>{c(e)}}),n.createElement(i.Z,{disableRipple:!0,disableFocusRipple:!0,sx:[{"&:hover":{color:"var(--ifm-color-primary)",backgroundColor:"transparent"}},{boxShadow:"0"}],className:"button",onClick:()=>{t(o),c("")}},n.createElement(r.Z,{sx:{color:"var(--ifm-color-primary)"}})),n.createElement("div",{className:"aux-buttons"},n.createElement(l.Z,{sx:{bgcolor:"var(--ifm-color-primary)",color:"white",margin:"5px"},onClick:()=>a("ai-tutor-history.json")},"Download"),n.createElement("a",{id:"save-chat-history",hidden:!0}),n.createElement(l.Z,{sx:{bgcolor:"var(--ifm-color-primary)",color:"white",margin:"5px"},onClick:()=>document.getElementById("load-chat-history")?.click()},"Upload"),n.createElement("input",{id:"load-chat-history",type:"file",accept:".json,application/json",onChange:async e=>{if(e.target.files)try{const a=await(t=e.target.files[0],new Promise(((e,a)=>{const n=new FileReader;n.onload=t=>{t.target&&e(JSON.parse(t.target.result))},n.onerror=e=>a(e),n.readAsText(t)})));s(a)}catch(a){console.error(a),alert("Invalid JSON format. File must be a valid chat history.")}var t},hidden:!0}))))}var d=a(87462),p=a(69661),h=a(12714),g=a(7339),y=a(91733);function f(e){const t=e.message?e.message:"",a=e.timestamp?e.timestamp:"",s=e.photoURL,o=e.displayName?e.displayName:"no name",r=e.avatarDisp??!1;return n.createElement(n.Fragment,null,n.createElement("div",{className:"messageRow"},r?n.createElement(p.Z,{alt:o,src:s??""},s?n.createElement(n.Fragment,null):n.createElement(h.Z,null)):n.createElement(p.Z,{sx:{bgcolor:"transparent"}}),n.createElement("div",null,r?n.createElement("div",{className:"displayName"},o):n.createElement(n.Fragment,null),n.createElement("div",{className:"messageBlue"},n.createElement(E,{message:t}),n.createElement("div",{className:"messageTimeStampRight"},a)))))}function v(e){const t=e.message?e.message:"no message",a=e.timestamp?e.timestamp:"";return n.createElement("div",{className:"messageRowRight"},n.createElement("div",{className:"messageOrange"},n.createElement(E,{message:t}),n.createElement("div",{className:"messageTimeStampRight"},a)))}function E(e){let{message:t}=e;return n.createElement(g.D,{children:t,components:{code(e){let{node:t,inline:a,className:s,children:o,...r}=e;const i=/language-(\w+)/.exec(s||"");return!a&&i?n.createElement(y.Z,(0,d.Z)({},r,{children:String(o).replace(/\n$/,""),language:i[1],PreTag:"div"})):n.createElement("code",(0,d.Z)({},r,{className:s}),o)}}})}var w=a(1375),N=a(28965);const b=["tutor_response","follow_up_question","question_completed","question_level","answer_is_correct"],_=["question"];function S(e,t){const a=(0,N.Z)(e);let n={};try{n=JSON.parse(a)}catch(s){q&&console.warn("Error parsing JSON",s)}finally{for(const e of t)e in n||(n[e]="");return n}}var C=a(36809);const q=Number(C.default.customFields.LOCAL),x=C.default.customFields.LOCAL_SERVER,A=q?x:"https://lei.ucsd.edu:5445",I="/response",T="/question",k=[{type:"bot",message:"Hello! I am your personalized AI tutor. Let me help you with any question you might have for this course."}],D=[n.createElement(f,{message:"Hello! I am your personalized AI tutor. Let me help you with any question you might have for this course.",timestamp:"",displayName:"AI Tutor",avatarDisp:!0})],L=["remember","understand","apply","analyze"],O=3,F="conditionals",H={conditionals:{remember:["Can you explain the role of indentation in `if`, `else`, and `elif` clauses in Python?"],understand:["What is the output of the code below if 'a' equals to 5 and 'b' equals to 7? \n\n(A) a is less than b \n\n(B) a is equal to b \n\n(C) a is greater than b \n\n(D) It will throw an error\n\n```python\nif a < b:\n   print('a is less than b')\nelif a == b:\n   print('a is equal to b')\nelse:\n   print('a is greater than b')\n```\n"],apply:['Assume you have a variable "temp" which stores the current temperature. Your goal is to program a thermostat to behave differently based on the temperature.If "temp" is less than 20, the thermostat should activate heating and print "Heating ON". If "temp" is equal to or higher than 20 and less than 25, the thermostat should remain on standby and print "Thermostat on standby". If "temp" is equal to or higher than 25, the thermostat should activate cooling and print "Cooling ON". Write the if-else statement for this scenario.'],analyze:["Consider the following Python code. What will be outputted and why?\n\nCode:\n```python\ngender = 'female'\nage = 15\nif gender == 'male':\n   print(\"Hello sir, you're welcome.\")\nelif age < 18:\n   print(\"You're not yet an adult.\")\nelse:\n   print(\"Hello ma'am, you're welcome.\")\n```\nCan you analyze the logic of this if-elif-else construct? How does it determine which statement to print? Also, supposing the variables 'gender' and 'age' were set to different values, how would the output change?"]}}[F],Z=["Here's a practice question to help you with ","Let's practice ","Let's work on "];function P(){const[e,t]=(0,n.useState)(void 0),[a,s]=(0,n.useState)(void 0),[r,i]=(0,n.useState)(k),[l,c]=(0,n.useState)(D),[m,d]=(0,n.useState)([]),[p,h]=(0,n.useState)(H),[g,y]=(0,n.useState)(0),[E,N]=(0,n.useState)(!1);(0,n.useEffect)((()=>{a&&a.length>0&&async function(e,t){const a={bloom_level:e,previous_questions:t,include_prefix:!0};return await async function(e){const t=`${A}${T}`;try{let a,n="";const s=new Promise(((s,o)=>{(async()=>{await(0,w.L)(t,{method:"POST",headers:{Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify(e),async onopen(e){e.status>=400&&e.status<500&&429!==e.status&&(console.error("Client-side error ",e),o(e))},onmessage(e){"<END>"!==e.data?(n+=e.data.replace(/<SLASH>/g,"\\"),a=S(n,_)):s(a.question)},onerror(e){console.error(e),o(e)}})})()}));return await s}catch(a){return console.error(a),void alert("Error getting response from server")}}(a)}(e,p[e]).then((t=>{const a={...p};a[e].push(t),h(a)})).catch((e=>{console.error(e)}))}),[a]),(0,n.useEffect)((()=>{const t=function(e,t){if(!t||!e||!(e in t)||0===t[e].length)return;const a=t[e];return a[a.length-1]}(e,p);if(!E&&t&&g<O){console.log("question: ",t);const a=function(e,t,a){const n=Z[Math.floor(Math.random()*Z.length)],s="analyze"===e?"analyzing":`${e}ing`,o=`${n}${s} ${t}${a?"":" again"}.\n\n`;return o}(e,F,0===g);$(a+t,"AI Tutor",r,l,c,i);s(t)}}),[e,g]);return n.createElement("div",{className:"chatContainer",key:"chat-container"},n.createElement(o.Z,{className:"paper",elevation:0},n.createElement(o.Z,{id:"style-1",className:"messagesBody",key:"messages-body"},n.createElement("div",{className:"messages",key:"messages"},m.length>0?n.createElement(f,{message:R(m),timestamp:"",displayName:"AI Tutor",avatarDisp:!0,key:"ai-msg"}):n.createElement(n.Fragment,null),l)),p?n.createElement(u,{onAddMsg:async s=>{if(0===s.trim().length)return void alert("Please enter a non-empty message.");const o={user:"kayla",password:"lei",timestamp:Date.now(),message:s,correctSoFar:g,threshold:O};e&&(o.current_step=e);const m=[...r,{type:"user",message:s}];o.history=function(e){let t="\n";for(let a=0;a<e.length;a++){const n=e[a];"bot"===n.type?t+="tutor: "+n.message+"\n":t+="student: "+n.message+"\n"}return t}(m);const u=[n.createElement(v,{message:s,timestamp:"",displayName:"User",avatarDisp:!1}),...l];c(u),async function(e,t,a){let n=`${A}${I}`;try{const{user:s,history:o}=e,r={name:s,chat_history:o??"",last_question:t,include_prefix:!0};console.log(r);let i,l="";const c=new Promise(((e,t)=>{(async()=>{await(0,w.L)(n,{method:"POST",headers:{Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify(r),async onopen(e){e.status>=400&&e.status<500&&429!==e.status&&(console.error("Client-side error ",e),t(e))},onmessage(t){"<END>"!==t.data?(l+=t.data.replace(/<SLASH>/g,"\\"),i=S(l,b),a((e=>[...e,i]))):e(i)},onerror(e){console.error(e),t(e)}})})()}));return await c}catch(s){return console.error(s),void alert("Error getting response from server")}}(o,a??"",d).then((a=>{if("tutor_response"in a&&""!==a.tutor_response){N(!1);const n=function(e,t,a,n){return""!==t&&"false"===a&&n?e+"\n\n"+t:e}(a.tutor_response,a.follow_up_question,a.question_completed,e),[s,o]=$(n,"AI Tutor",m,u,c,i);d([]);let r=g;if(e&&"true"===a.question_completed&&(r+=1,y(r)),r===O){if(L.indexOf(e)+1===L.length){$("Congratulations! You have successfully completed reviewing the concept! Would you like to review another concept?","AI Tutor",o,s,c,i);t(void 0)}else{const a=L.indexOf(e),n=L[a+1];t(n),y(0)}}e||""===a.question_level||t(a.question_level)}else alert("No tutor response received. Please try again.")})).catch((e=>{console.error(e)}))},onSaveHistory:t=>{const n={msgs:r,questionLevel:e??"undefined",lastQuestion:a??"undefined",correctSoFar:g,rawQuestionData:p},s=encodeURIComponent(JSON.stringify(n,null,2)),o=document.getElementById("save-chat-history");o.href=`data:application/json;charset=utf-8,${s}`,o.download=t,o.click()},onLoadHistory:e=>{const a=e.msgs,o=e.questionLevel,r=e.lastQuestion,l=e.correctSoFar,m=e.rawQuestionData;N(!0),i(a),c(a.slice(0).reverse().map((e=>"bot"===e.type?n.createElement(f,{message:e.message,timestamp:"",displayName:"AI Tutor",avatarDisp:!0}):n.createElement(v,{message:e.message,timestamp:"",displayName:"User",avatarDisp:!1})))),t("undefined"===o?void 0:o),s("undefined"===r?void 0:r),y(l),h(m)}}):n.createElement("h3",null,"Initializing the chat. Please wait...")))}function R(e){return e[e.length-1].tutor_response}function $(e,t,a,s,o,r){const i="AI Tutor"===t?n.createElement(f,{message:e,timestamp:"",displayName:"AI Tutor",avatarDisp:!0}):n.createElement(v,{message:e,timestamp:"",displayName:"User",avatarDisp:!1});a.push({type:"AI Tutor"===t?"bot":"user",message:e});const l=[i,...s];return o(l),r(a),[l,a]}function z(){return n.createElement(s.Z,{title:"Tutor",description:"Tutor Page"},n.createElement(P,null))}}}]);