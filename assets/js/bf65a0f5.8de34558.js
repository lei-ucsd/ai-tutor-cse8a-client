"use strict";(self.webpackChunkai_tutor_cse_8_a=self.webpackChunkai_tutor_cse_8_a||[]).push([[252],{6144:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var s=a(7294),r=a(1155),n=a(629),l=a(6307),m=a(2254),o=a(7566);function c(e){let{onAddMsg:t}=e;const[a,r]=(0,s.useState)("");return s.createElement(s.Fragment,null,s.createElement("div",{className:"wrapForm"},s.createElement(m.Z,{id:"standard-text",label:"Message",className:"wrapText",value:a,onChange:e=>r(e.target.value)}),s.createElement(o.Z,{sx:{color:"var(--ifm-color-primary"},className:"button",onClick:()=>{t(a),r("")}},s.createElement(l.Z,{sx:{color:"var(--ifm-color-primary)"}}))))}var i=a(9661),u=a(7486);function p(e){const t=e.message?e.message:"no message",a=e.timestamp?e.timestamp:"",r=e.photoURL,n=e.displayName?e.displayName:"no name",l=e.avatarDisp??!1;return s.createElement(s.Fragment,null,s.createElement("div",{className:"messageRow"},l?s.createElement(i.Z,{alt:n,src:r??""},r?s.createElement(s.Fragment,null):s.createElement(u.Z,null)):s.createElement(i.Z,{sx:{bgcolor:"transparent"}}),s.createElement("div",null,l?s.createElement("div",{className:"displayName"},n):s.createElement(s.Fragment,null),s.createElement("div",{className:"messageBlue"},s.createElement("div",null,s.createElement("p",{className:"messageContent"},t)),s.createElement("div",{className:"messageTimeStampRight"},a)))))}function g(e){const t=e.message?e.message:"no message",a=e.timestamp?e.timestamp:"";return s.createElement("div",{className:"messageRowRight"},s.createElement("div",{className:"messageOrange"},s.createElement("p",{className:"messageContent"},t),s.createElement("div",{className:"messageTimeStampRight"},a)))}function d(){return s.createElement("div",{className:"lds-ellipsis"},s.createElement("div",null),s.createElement("div",null),s.createElement("div",null),s.createElement("div",null))}var E=a(6154);const h="https://gilpasternak35.pythonanywhere.com",v="/";function y(e){if(e)return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\?/g,"&quest;");console.error("No text given")}const N=[{type:"bot",message:"Hello! I am your personalized AI tutor. Let me help you with any question you might have for this course."}],f=[s.createElement(p,{message:"Hello! I am your personalized AI tutor. Let me help you with any question you might have for this course.",timestamp:"",displayName:"AI Tutor",avatarDisp:!0})];function w(){const[e,t]=(0,s.useState)(N),[a,r]=(0,s.useState)(f),[l,m]=(0,s.useState)(!1),o=s.createElement(d,null);return s.createElement("div",{className:"chatContainer"},s.createElement(n.Z,{className:"paper",elevation:0},s.createElement(n.Z,{id:"style-1",className:"messagesBody"},l?o:s.createElement(s.Fragment,null),a),s.createElement(c,{onAddMsg:async n=>{const l={user:"bob",password:"lei",timestamp:Date.now(),message:n};e.length>1&&(l.history=function(e){let t="\n";for(let a=0;a<e.length;a++){const s=e[a];"bot"===s.type?t+="AI: "+s.message+"\n":t+="User: "+s.message+"\n"}return t}(e));const o=[...e,{type:"user",message:n}],c=[s.createElement(g,{message:n,timestamp:"",displayName:"User",avatarDisp:!1}),...a];r(c),m(!0),console.log(l);const i=await async function(e){const{user:t,password:a,message:s,timestamp:r,history:n}=e;let l=`${h}${v}?&user=${y(t)}&password=${y(a)}&message=${y(s)}`;r&&(l+=`&timestamp=${r}`),n&&(l+=`&history=${y(n)}`);try{const e=await E.Z.post(l,{headers:{"Access-Control-Allow-Methods":"GET,POST","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Origin"}});return JSON.parse(e.data)}catch(m){return console.error(m),void alert("Error getting response from server")}}(l);i?(o.push({type:"bot",message:i.message}),r([s.createElement(p,{message:i.message,timestamp:"",displayName:"AI Tutor",avatarDisp:!0}),...c]),t(o),m(!1)):(o.push({type:"bot",message:"AI is offline at the moment. Please try again later."}),t(o),r([s.createElement(p,{message:"AI is offline at the moment. Please try again later.",timestamp:"",displayName:"AI Tutor",avatarDisp:!0}),...c]),m(!1))}})))}function A(){return s.createElement(r.Z,{title:"Tutor",description:"Tutor Page"},s.createElement(w,null))}}}]);