"use strict";(self.webpackChunkai_tutor_cse_8_a=self.webpackChunkai_tutor_cse_8_a||[]).push([[252],{11866:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var n=a(67294),s=a(82750),r=a(90629),o=a(26307),i=a(93946),l=a(83321),c=a(90747);function m(e){let{id:t,className:a,value:s,onChange:r}=e;const o=(0,c.j)({height:"100%",maxHeight:"100%"});return n.createElement("div",{id:t,className:`container ${a}`,"data-color-mode":"light",style:{margin:"1vh 0px",maxWidth:"100%"},onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),o.insertText("    "))}},n.createElement(c.C,{editor:o,value:s,onChange:r,throttleInMs:200}))}function u(e){let{onAddMsg:t,onSaveHistory:a,onLoadHistory:s}=e;const[r,c]=(0,n.useState)("");return n.createElement(n.Fragment,null,n.createElement("div",{className:"wrapForm"},n.createElement(m,{id:"standard-text",className:"wrapText",value:r,onChange:e=>{c(e)}}),n.createElement(i.Z,{disableRipple:!0,disableFocusRipple:!0,sx:[{"&:hover":{color:"var(--ifm-color-primary)",backgroundColor:"transparent"}},{boxShadow:"0"}],className:"button",onClick:()=>{t(r),c("")}},n.createElement(o.Z,{sx:{color:"var(--ifm-color-primary)"}})),n.createElement("div",{className:"aux-buttons"},n.createElement(l.Z,{sx:{bgcolor:"var(--ifm-color-primary)",color:"white",margin:"5px"},onClick:()=>a("ai-tutor-history.json")},"Download"),n.createElement("a",{id:"save-chat-history",hidden:!0}),n.createElement(l.Z,{sx:{bgcolor:"var(--ifm-color-primary)",color:"white",margin:"5px"},onClick:()=>document.getElementById("load-chat-history")?.click()},"Upload"),n.createElement("input",{id:"load-chat-history",type:"file",accept:".json,application/json",onChange:async e=>{if(e.target.files)try{const a=await(t=e.target.files[0],new Promise(((e,a)=>{const n=new FileReader;n.onload=t=>{t.target&&e(JSON.parse(t.target.result))},n.onerror=e=>a(e),n.readAsText(t)})));s(a)}catch(a){console.error(a),alert("Invalid JSON format. File must be a valid chat history.")}var t},hidden:!0}))))}var d=a(87462),p=a(69661),h=a(12714),g=a(7339),y=a(91733);function f(e){const t=e.message?e.message:"",a=e.timestamp?e.timestamp:"",s=e.photoURL,r=e.displayName?e.displayName:"no name",o=e.avatarDisp??!1;return n.createElement(n.Fragment,null,n.createElement("div",{className:"messageRow"},o?n.createElement(p.Z,{alt:r,src:s??""},s?n.createElement(n.Fragment,null):n.createElement(h.Z,null)):n.createElement(p.Z,{sx:{bgcolor:"transparent"}}),n.createElement("div",null,o?n.createElement("div",{className:"displayName"},r):n.createElement(n.Fragment,null),n.createElement("div",{className:"messageBlue"},n.createElement(E,{message:t}),n.createElement("div",{className:"messageTimeStampRight"},a)))))}function v(e){const t=e.message?e.message:"no message",a=e.timestamp?e.timestamp:"";return n.createElement("div",{className:"messageRowRight"},n.createElement("div",{className:"messageOrange"},n.createElement(E,{message:t}),n.createElement("div",{className:"messageTimeStampRight"},a)))}function E(e){let{message:t}=e;return n.createElement(g.D,{children:t,components:{code(e){let{node:t,inline:a,className:s,children:r,...o}=e;const i=/language-(\w+)/.exec(s||"");return!a&&i?n.createElement(y.Z,(0,d.Z)({},o,{children:String(r).replace(/\n$/,""),language:i[1],PreTag:"div"})):n.createElement("code",(0,d.Z)({},o,{className:s}),r)}}})}var w=a(1375),N=a(28965);const b=["tutor_response","follow_up_question","question_completed","question_level","answer_is_correct"],_=["question"];function S(e,t){const a=(0,N.Z)(e);let n={};try{n=JSON.parse(a)}catch(s){x&&console.warn("Error parsing JSON",s)}finally{for(const e of t)e in n||(n[e]="");return n}}var q=a(36809);const x=Number(q.default.customFields.LOCAL),C=q.default.customFields.LOCAL_SERVER,I=x?C:"https://lei.ucsd.edu:5445",T="/response",A="/question",k=[{type:"bot",message:"Hello! I am your personalized AI tutor. Let me help you with any question you might have for this course."}],D=[n.createElement(f,{message:"Hello! I am your personalized AI tutor. Let me help you with any question you might have for this course.",timestamp:"",displayName:"AI Tutor",avatarDisp:!0})],L=["remember","understand","apply","analyze"],O=3,F="conditionals",Z={conditionals:{remember:["Can you explain the role of indentation in `if`, `else`, and `elif` clauses in Python?"],understand:["What is the output of the code below if `a` equals to 5 and `b` equals to 7? \n\n```python\nif a < b:\n   print('a is less than b')\nelif a == b:\n   print('a is equal to b')\nelse:\n   print('a is greater than b')\n```\n\n(A) a is less than b \n\n(B) a is equal to b \n\n(C) a is greater than b \n\n(D) It will throw an error\n\n"],apply:['Assume you have a variable `temp` which stores the current temperature. Your goal is to program a thermostat to behave differently based on the temperature.If `temp` is less than 20, the thermostat should activate heating and print "Heating ON". If `temp` is equal to or higher than 20 and less than 25, the thermostat should remain on standby and print "Thermostat on standby". If `temp` is equal to or higher than 25, the thermostat should activate cooling and print "Cooling ON". Write the if-else statement for this scenario.'],analyze:['Consider the following Python code. What will be outputted and why?\n\n```python\nage = 15\nif age < 18:\n   print("You\'re not yet an adult.")\nelse:\n   print("Welcome, visitor!")\n```\n']}}[F],P=["Here's a practice question to help you with ","Let's practice ","Let's work on "];function R(){const[e,t]=(0,n.useState)(void 0),[a,s]=(0,n.useState)(void 0),[o,i]=(0,n.useState)(k),[l,c]=(0,n.useState)(D),[m,d]=(0,n.useState)([]),[p,h]=(0,n.useState)(Z),[g,y]=(0,n.useState)(0),[E,N]=(0,n.useState)(!1);(0,n.useEffect)((()=>{a&&a.length>0&&async function(e,t){const a={bloom_level:e,previous_questions:t,include_prefix:!0};return await async function(e){const t=`${I}${A}`;try{let a,n="";const s=new Promise(((s,r)=>{(async()=>{await(0,w.L)(t,{method:"POST",headers:{Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify(e),async onopen(e){e.status>=400&&e.status<500&&429!==e.status&&(console.error("Client-side error ",e),r(e))},onmessage(e){"<END>"!==e.data?(n+=e.data.replace(/<SLASH>/g,"\\"),a=S(n,_)):s(a.question)},onerror(e){console.error(e),r(e)}})})()}));return await s}catch(a){return console.error(a),void alert("Error getting response from server")}}(a)}(e,p[e]).then((t=>{const a={...p};a[e].push(t),h(a)})).catch((e=>{console.error(e)}))}),[a]),(0,n.useEffect)((()=>{const t=function(e,t){if(!t||!e||!(e in t)||0===t[e].length)return;const a=t[e];return a[a.length-1]}(e,p);if(!E&&t&&g<O){console.log("question: ",t);const a=function(e,t,a){const n=P[Math.floor(Math.random()*P.length)],s="analyze"===e?"analyzing":`${e}ing`,r=`${n}${s} ${t}${a?"":" again"}.\n\n`;return r}(e,F,0===g);H(a+t,"AI Tutor",o,l,c,i);s(t)}}),[e,g]);return n.createElement("div",{className:"chatContainer",key:"chat-container"},n.createElement(r.Z,{className:"paper",elevation:0},n.createElement(r.Z,{id:"style-1",className:"messagesBody",key:"messages-body"},n.createElement("div",{className:"messages",key:"messages"},m.length>0?n.createElement(f,{message:$(m),timestamp:"",displayName:"AI Tutor",avatarDisp:!0,key:"ai-msg"}):n.createElement(n.Fragment,null),l)),p?n.createElement(u,{onAddMsg:async s=>{if(0===s.trim().length)return void alert("Please enter a non-empty message.");const r={user:"kayla",password:"lei",timestamp:Date.now(),message:s,correctSoFar:g,threshold:O};e&&(r.current_step=e);const m=[...o,{type:"user",message:s}];r.history=function(e){let t="\n";for(let a=0;a<e.length;a++){const n=e[a];"bot"===n.type?t+="tutor: "+n.message+"\n":t+="student: "+n.message+"\n"}return t}(m);const u=[n.createElement(v,{message:s,timestamp:"",displayName:"User",avatarDisp:!1}),...l];c(u),async function(e,t,a){let n=`${I}${T}`;try{const{user:s,history:r}=e,o={name:s,chat_history:r??"",last_question:t,include_prefix:!0};console.log(o);let i,l="";const c=new Promise(((e,t)=>{(async()=>{await(0,w.L)(n,{method:"POST",headers:{Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify(o),async onopen(e){e.status>=400&&e.status<500&&429!==e.status&&(console.error("Client-side error ",e),t(e))},onmessage(t){"<END>"!==t.data?(l+=t.data.replace(/<SLASH>/g,"\\"),i=S(l,b),a((e=>[...e,i]))):e(i)},onerror(e){console.error(e),t(e)}})})()}));return await c}catch(s){return console.error(s),void alert("Error getting response from server")}}(r,a??"",d).then((a=>{if("tutor_response"in a&&""!==a.tutor_response){N(!1);const n=function(e,t,a,n){return""!==t&&"false"===a&&n&&"apply"!==n?e+"\n\n"+t:e}(a.tutor_response,a.follow_up_question,a.question_completed,e),[s,r]=H(n,"AI Tutor",m,u,c,i);d([]);let o=g;if(e&&"true"===a.question_completed&&(o+=1,y(o)),o===O){if(L.indexOf(e)+1===L.length){H("Congratulations! You have successfully completed reviewing the concept! Would you like to review another concept?","AI Tutor",r,s,c,i);t(void 0)}else{const a=L.indexOf(e),n=L[a+1];t(n),y(0)}}e||""===a.question_level||t(a.question_level)}else alert("No tutor response received. Please try again.")})).catch((e=>{console.error(e)}))},onSaveHistory:t=>{const n={msgs:o,questionLevel:e??"undefined",lastQuestion:a??"undefined",correctSoFar:g,rawQuestionData:p},s=encodeURIComponent(JSON.stringify(n,null,2)),r=document.getElementById("save-chat-history");r.href=`data:application/json;charset=utf-8,${s}`,r.download=t,r.click()},onLoadHistory:e=>{const a=e.msgs,r=e.questionLevel,o=e.lastQuestion,l=e.correctSoFar,m=e.rawQuestionData;N(!0),i(a),c(a.slice(0).reverse().map((e=>"bot"===e.type?n.createElement(f,{message:e.message,timestamp:"",displayName:"AI Tutor",avatarDisp:!0}):n.createElement(v,{message:e.message,timestamp:"",displayName:"User",avatarDisp:!1})))),t("undefined"===r?void 0:r),s("undefined"===o?void 0:o),y(l),h(m)}}):n.createElement("h3",null,"Initializing the chat. Please wait...")))}function $(e){return e[e.length-1].tutor_response}function H(e,t,a,s,r,o){const i="AI Tutor"===t?n.createElement(f,{message:e,timestamp:"",displayName:"AI Tutor",avatarDisp:!0}):n.createElement(v,{message:e,timestamp:"",displayName:"User",avatarDisp:!1});a.push({type:"AI Tutor"===t?"bot":"user",message:e});const l=[i,...s];return r(l),o(a),[l,a]}function j(){return n.createElement(s.Z,{title:"Tutor",description:"Tutor Page"},n.createElement(R,null))}}}]);